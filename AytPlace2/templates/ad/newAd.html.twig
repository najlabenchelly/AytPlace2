{% extends 'base.html.twig' %}

{% block title %} Création d'une annonce {% endblock %}
{% form_theme form _self %}

{% block body %}

     <div class="container">
     <h1> Créer une nouvelle annonce</h1>

     {{ form_start(form) }}

     
     {{ form_widget(form) }}
     <button type="submit" class= "btn btn-primary">Créer la nouvelle annonce </button>

     {{ form_end(form) }}
     </div>

{% endblock %}


{% block _annonce_images_widget %}

      <p> Ajouter vos images </p>

   {{ form_widget(form) }}

   <div class="form-group">
     <button type="button" id="add-image" class= "btn btn-primary">Ajouter une image</button>
   </div>
{% endblock %}


{% block _annonce_images_entry_row %}
    {{ form_widget(form)}}
{% endblock %}


{% block _annonce_images_entry_widget %}
     <div class="form-group">
          <div class="row">
              <div class="col">
              {{ form_widget(form.url) }}
          </div>
              <div class="col"> 
              {{ form_widget(form.caption) }}
              </div>

          </div>

     </div>
    
    <p> </p>

{{ form_widget(form) }}

{% endblock %}


{% block javascripts %}
  <script> 
  $('#add-image').click(function(){
       //je reecup le num des futurs champs quee je vqis créer
       const index = $('#annonce_images div.form-group').length;
       // reecup model form prototypee
       const templt = $('#annonce_images').data('prototype').replace(/__name__/g, index);
// injection du code dans la div 
       $('#annonce_images').append(templt);

  });


  </script>

{% endblock %}

